---
layout: post
status: publish
published: true
title: How large can MySQL Replication be in production?
author: isotopp
author_login: kris
author_email: kristian.koehntopp@gmail.com
wordpress_id: 2337
wordpress_url: http://blog.koehntopp.info/?p=2337
date: '2017-08-02 11:34:44 +0200'
date_gmt: '2017-08-02 09:34:44 +0200'
categories:
- MySQL
tags: []
---
<p>Based on [How large can MySQL be in production](http://blog.koehntopp.info/index.php/2219-how-large-can-mysql-be-in-production/) ([article by JF](http://jfg-mysql.blogspot.nl/2017/07/how-far-with-mysql-mariadb.html)), I have been looking at the awesome [Orchestrator visualization](https://github.com/github/orchestrator) of some replication hierarchies. [caption id="attachment\_2338" align="aligncenter" width="640"][![](http://blog.koehntopp.info/wp-content/uploads/2017/08/hierarchies-overview-640x293.png)](http://blog.koehntopp.info/wp-content/uploads/2017/08/hierarchies-overview.png) Click for large[/caption] Names have been removed, but the blue badges indicate some host counts. All of these are installations replicating across multiple Cluster/Data Center Boundaries. Orchestrator is by far the best tool to discover and manage replication setups like these. You can restructure replication topologies with drag and drop. <!--more--> If you look inside such a hierarchy, it can be pretty daunting: [caption id="attachment\_2339" align="aligncenter" width="640"][![](http://blog.koehntopp.info/wp-content/uploads/2017/08/hierarchy1-unfoled-640x360.png)](http://blog.koehntopp.info/wp-content/uploads/2017/08/hierarchy1-unfoled.png) Click for large[/caption] What you see is a master server running MySQL 5.7 on the left, in orange. It does replicate to local replicas using instance-fdd8 below, using statement based replication. The local replica then explodes things to a larger number of replicas, also in orange (same DC). Replication lag is slow. A cross DC-link is indicated above, dotted line. The target DC is rendered in green. Slaves with version numbers and replication lag are being shown. Instance-5a25 is lagging. The view can be compressed: [caption id="attachment\_2340" align="aligncenter" width="640"][![](http://blog.koehntopp.info/wp-content/uploads/2017/08/hierarchy1-folded-640x230.png)](http://blog.koehntopp.info/wp-content/uploads/2017/08/hierarchy1-folded.png) Click for large[/caption] Here again, blue badges show counts of servers that have been compressed into one bezel. Note the third cross DC link from green to blue. Here is a look at the really large hierarchy from the top image. It's folded and still does not fit: [caption id="attachment\_2341" align="aligncenter" width="640"][![](http://blog.koehntopp.info/wp-content/uploads/2017/08/hierarchy2-with-8.0-640x360.png)](http://blog.koehntopp.info/wp-content/uploads/2017/08/hierarchy2-with-8.0.png) Click for large[/caption] See the mix of versions: I can spot MySQL 5.6, MySQL 5.7 and one 8.0 (half visible in dark red at the bottom) in the mix. Topology is really wild, see this part of the diagram: [caption id="attachment\_2342" align="aligncenter" width="640"][![](http://blog.koehntopp.info/wp-content/uploads/2017/08/hierarchy2-with-errors-640x360.png)](http://blog.koehntopp.info/wp-content/uploads/2017/08/hierarchy2-with-errors.png) Click for large[/caption] Again, compressed view - note the server counts in the blue badges. Also see the multitude of cross-cluster connections from the red master to the crowd of orange intermediates. Instance-2835 and children are badly lagging. The rest is fine.</p>
