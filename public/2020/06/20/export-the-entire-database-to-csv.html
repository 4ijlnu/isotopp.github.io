<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<title>Die wunderbare Welt von Isotopp - Export the entire database to CSV</title>
<meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="manifest" href="site.webmanifest">
<link rel="apple-touch-icon" href="icon.png">
<link rel="favicon.ico" rel="icon" type="image/ico">





	



<link rel="stylesheet" href="/style.min.c5e5cd61f54911f9aafd1dbe09c2f90667957bfe1002126c87aace57759f3446.css">


    </head>
    <body>
        

        <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container-fluid">
	<a class="navbar-brand" href="" rel="home" title=".Site.Title">
	    Die wunderbare Welt von Isotopp
	</a>
	<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
	</button>

	<div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
		
		
		<li class="nav-item ">
                    <a class="nav-link" href="/about/">
			
			<span>About</span>
			<span class="visually-hidden">(Current)</span>
		    </a>
		    
		</li>
            </ul>
            
	</div>
    </div>
</nav>


        <main role="main" class="container-fluid">

            


<div class="page">
    <article class="export-the-entire-database-to-csv-page">
	<h1 class="title">
            Export the entire database to CSV
	</h1>

	<p>A <a href="https://www.reddit.com/r/mysql/comments/hbg712/export_entire_database_to_csv/" target="_blank" rel="noopener">question</a>

 from Reddit&rsquo;s /r/mysql:</p>
<blockquote>
<p>Really new to MySQL and had a request to export an entire database to csv for review. I can manually export each table using workbench but there are 10+ tables and 10+ databases so I was looking to export the entire database to csv.</p>
</blockquote>
<p>It is likely that you have additional requirements on top of this, so it would be best to script this in a way that would allow for customization.</p>
<p>Try this piece of Python 3.7 (or better) as a starting point. It requires <code>mysqlclient</code> to be installed with pip (preferrably in a venv).</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#! /usr/bin/env python</span>
<span style="color:#75715e"># -*- coding: utf-8 -*-</span>

<span style="color:#75715e"># pip install mysqlclient (https://pypi.org/project/mysqlclient/)</span>
<span style="color:#f92672">import</span> MySQLdb
<span style="color:#f92672">import</span> csv

<span style="color:#75715e"># connect to database, set mysql_use_results mode for streaming</span>
db_config <span style="color:#f92672">=</span> dict(
    host<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;localhost&#34;</span>,
    user<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;kris&#34;</span>,
    passwd<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;geheim&#34;</span>,
    db<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;kris&#34;</span>,
)

db <span style="color:#f92672">=</span> MySQLdb<span style="color:#f92672">.</span>connect(<span style="color:#f92672">**</span>db_config)

<span style="color:#75715e"># Default is db.store_result(), which would buffer the</span>
<span style="color:#75715e"># result set in memory in the client. This won&#39;t work</span>
<span style="color:#75715e"># for a full table download, so we switch to streaming</span>
<span style="color:#75715e"># mode aka db.use_result(). That way we keep at most</span>
<span style="color:#75715e"># one result row in memory at any point in time.</span>
db<span style="color:#f92672">.</span>use_result()

<span style="color:#75715e"># Get a list of all tables in database</span>
tables <span style="color:#f92672">=</span> db<span style="color:#f92672">.</span>cursor()
tables<span style="color:#f92672">.</span>execute(<span style="color:#e6db74">&#34;show tables&#34;</span>)

<span style="color:#75715e"># for each table, dump it to csv file</span>
<span style="color:#66d9ef">for</span> t <span style="color:#f92672">in</span> tables:
  table <span style="color:#f92672">=</span> t[<span style="color:#ae81ff">0</span>]
  <span style="color:#66d9ef">print</span>(f<span style="color:#e6db74">&#34;table = {table}&#34;</span>)

  data <span style="color:#f92672">=</span> db<span style="color:#f92672">.</span>cursor()
  data<span style="color:#f92672">.</span>execute(f<span style="color:#e6db74">&#34;select * from `{table}`&#34;</span>)

  <span style="color:#66d9ef">with</span> open(f<span style="color:#e6db74">&#34;{table}.csv&#34;</span>, <span style="color:#e6db74">&#34;w&#34;</span>) <span style="color:#66d9ef">as</span> csvfile:
    w <span style="color:#f92672">=</span> csv<span style="color:#f92672">.</span>writer(csvfile)
    w<span style="color:#f92672">.</span>writerows(data)
</code></pre></div><p>Then customize as needed.</p>
<p><em>Note:</em> Using <code>db.use_result()</code> normally is not recommended, because it puts additional burden on the database when handling your result set, and because you cannot jump back and forth in the result set in the client.</p>
<p>For a <code>mysqldump</code>-like usage as here, the default <code>db.store_result()</code> won&rsquo;t work, though, because it downloads the result set (here: entire tables) into client memory, one at a time, and that won&rsquo;t work. So in this particular case, <code>db.use_result()</code> is mandatory.</p>
<p>In <code>mysqldump</code>, the option <code>--quick</code> switches to streaming mode, and it is part of the <code>--opt</code> set of recommended options, and they are enabled by default. When using <code>mysqldump --skip-quick</code>, buffered mode is used (and your mysqldump will explode due to memory buffering requirements).</p>


	
    </article>
</div>



            <footer>
    <p>
	&copy; Copyright 2021 Someone or something
    </p>
</footer>


        </main>

	





<script src="/js/bootstrap.js"></script>




<script src="/js/lunr.js"></script>





<script src="/js/app.js"></script>


    </body>
</html>
