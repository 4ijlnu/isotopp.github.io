<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<title>Die wunderbare Welt von Isotopp - RTT-based vs. drop based congestion management</title>
<meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="manifest" href="site.webmanifest">
<link rel="apple-touch-icon" href="icon.png">
<link rel="favicon.ico" rel="icon" type="image/ico">





	



<link rel="stylesheet" href="/style.min.c5e5cd61f54911f9aafd1dbe09c2f90667957bfe1002126c87aace57759f3446.css">


    </head>
    <body>
        

        <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container-fluid">
	<a class="navbar-brand" href="" rel="home" title=".Site.Title">
	    Die wunderbare Welt von Isotopp
	</a>
	<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
	</button>

	<div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
		
		
		<li class="nav-item ">
                    <a class="nav-link" href="/about/">
			
			<span>About</span>
			<span class="visually-hidden">(Current)</span>
		    </a>
		    
		</li>
            </ul>
            
	</div>
    </div>
</nav>


        <main role="main" class="container-fluid">

            


<div class="page">
    <article class="rtt-based-vs.-drop-based-congestion-management-page">
	<h1 class="title">
            RTT-based vs. drop based congestion management
	</h1>

	<p><a href="https://blog.apnic.net/2017/05/09/bbr-new-kid-tcp-block/" target="_blank" rel="noopener">APNIC discusses different TCP congestion control algorithms</a>

,
coming from Reno, going through CUBIC and Vegas, then introducing BBR (seems
to be a variation on CoDel) and what they observed when running BBR in a
network with other implementations.</p>
<p>TCP congestion control algorithms try to estimate the bandwidth limit of a
multi-segment network path, where a stream crosses many routers. Each
segment may have a different available capacity. Overloading the total path
(that is, the thinnest subsegment of the path) will force packet drops by
overloading the buffers of the router just in front of that thin segment.
That in turn requires retransmits, which is inefficient and has nasty
delays.</p>
<p>To make matters more complicated, the Internet is a dynamic environment and
conditions can change during the lifetime of a connection. The first half up
to &ldquo;Sharing&rdquo; is nothing new if you followed the works of Dave Taht or later
works of Van Jacobson.</p>
<p>BBR seems to work like <a href="https://en.wikipedia.org/wiki/CoDel" target="_blank" rel="noopener">CoDel</a>

: It
measures the RTT, the time delay the sender sees between sending a piece of
data over the TCP link and seeing the acknowledgement return. And like
CoDel, BBR seems to try to keep buffers along the line just barely filled
(that is, whenever a router finishes sending a thing, the next thing should
be just ready to send in the buffer, but no more).</p>
<p>This again is not a new insight, it&rsquo;s
<a href="https://en.wikipedia.org/wiki/Theory_of_constraints#Operations" target="_blank" rel="noopener">Theory of Constraints</a>


and especially
<a href="http://www.lean-manufacturing-japan.com/scm-terminology/dbr-drum-buffer-rope-theory.html" target="_blank" rel="noopener">DBR</a>


applied to networking.</p>
<p>The new insight in the paper is that RTT-based queue capacity management can
in some circumstances starve drop-based algorithms. The authors show an
example where BBR starves out a CUBIC connection on the same link. The
section on &ldquo;Congestion Control and Active Network Profiling&rdquo; is then
somewhat politcal. BBR has been deployed by Youtube, and it not only
relieved buffer-management between Youtube and the Youtube client, it also
suddenly makes shapers on the way very visible.</p>
<p>Youtube is quoted with</p>
<blockquote>
<p>“Token-bucket policers. BBR’s initial YouTube deployment revealed that
most of the world’s ISPs mangle traffic with token-bucket policers. The
bucket is typically full at connection startup so BBR learns the
underlying network’s BtlBw [bottleneck bandwidth], but once the bucket
empties, all packets sent faster than the (much lower than BtlBw) bucket
fill rate are dropped. BBR eventually learns this new delivery rate, but
the ProbeBW gain cycle results in continuous moderate losses. To minimize
the upstream bandwidth waste and application latency increase from these
losses, we added policer detection and an explicit policer model to BBR.
We are also actively researching better ways to mitigate the policer
damage.”</p>
</blockquote>
<p>This is a very nice way to say &ldquo;We are seeing your shitty traffic shapers
and are working around them.&rdquo;</p>


	
    </article>
</div>



            <footer>
    <p>
	&copy; Copyright 2021 Someone or something
    </p>
</footer>


        </main>

	





<script src="/js/bootstrap.js"></script>




<script src="/js/lunr.js"></script>





<script src="/js/app.js"></script>


    </body>
</html>
